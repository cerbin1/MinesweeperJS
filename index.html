<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Minesweeper</title>
    <link rel="stylesheet" href="style.css">
</head>
<body onload="plantBombs()">
<table>
    <tr>
        <td onclick="playerMove(this)" id="0"></td>
        <td onclick="playerMove(this)" id="1"></td>
        <td onclick="playerMove(this)" id="2"></td>
        <td onclick="playerMove(this)" id="3"></td>
        <td onclick="playerMove(this)" id="4"></td>
        <td onclick="playerMove(this)" id="5"></td>
        <td onclick="playerMove(this)" id="6"></td>
        <td onclick="playerMove(this)" id="7"></td>
        <td onclick="playerMove(this)" id="8"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="9"></td>
        <td onclick="playerMove(this)" id="10"></td>
        <td onclick="playerMove(this)" id="11"></td>
        <td onclick="playerMove(this)" id="12"></td>
        <td onclick="playerMove(this)" id="13"></td>
        <td onclick="playerMove(this)" id="14"></td>
        <td onclick="playerMove(this)" id="15"></td>
        <td onclick="playerMove(this)" id="16"></td>
        <td onclick="playerMove(this)" id="17"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="18"></td>
        <td onclick="playerMove(this)" id="19"></td>
        <td onclick="playerMove(this)" id="20"></td>
        <td onclick="playerMove(this)" id="21"></td>
        <td onclick="playerMove(this)" id="22"></td>
        <td onclick="playerMove(this)" id="23"></td>
        <td onclick="playerMove(this)" id="24"></td>
        <td onclick="playerMove(this)" id="25"></td>
        <td onclick="playerMove(this)" id="26"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="27"></td>
        <td onclick="playerMove(this)" id="28"></td>
        <td onclick="playerMove(this)" id="29"></td>
        <td onclick="playerMove(this)" id="30"></td>
        <td onclick="playerMove(this)" id="31"></td>
        <td onclick="playerMove(this)" id="32"></td>
        <td onclick="playerMove(this)" id="33"></td>
        <td onclick="playerMove(this)" id="34"></td>
        <td onclick="playerMove(this)" id="35"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="36"></td>
        <td onclick="playerMove(this)" id="37"></td>
        <td onclick="playerMove(this)" id="38"></td>
        <td onclick="playerMove(this)" id="39"></td>
        <td onclick="playerMove(this)" id="40"></td>
        <td onclick="playerMove(this)" id="41"></td>
        <td onclick="playerMove(this)" id="42"></td>
        <td onclick="playerMove(this)" id="43"></td>
        <td onclick="playerMove(this)" id="44"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="45"></td>
        <td onclick="playerMove(this)" id="46"></td>
        <td onclick="playerMove(this)" id="47"></td>
        <td onclick="playerMove(this)" id="48"></td>
        <td onclick="playerMove(this)" id="49"></td>
        <td onclick="playerMove(this)" id="50"></td>
        <td onclick="playerMove(this)" id="51"></td>
        <td onclick="playerMove(this)" id="52"></td>
        <td onclick="playerMove(this)" id="53"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="54"></td>
        <td onclick="playerMove(this)" id="55"></td>
        <td onclick="playerMove(this)" id="56"></td>
        <td onclick="playerMove(this)" id="57"></td>
        <td onclick="playerMove(this)" id="58"></td>
        <td onclick="playerMove(this)" id="59"></td>
        <td onclick="playerMove(this)" id="60"></td>
        <td onclick="playerMove(this)" id="61"></td>
        <td onclick="playerMove(this)" id="62"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="63"></td>
        <td onclick="playerMove(this)" id="64"></td>
        <td onclick="playerMove(this)" id="65"></td>
        <td onclick="playerMove(this)" id="66"></td>
        <td onclick="playerMove(this)" id="67"></td>
        <td onclick="playerMove(this)" id="68"></td>
        <td onclick="playerMove(this)" id="69"></td>
        <td onclick="playerMove(this)" id="70"></td>
        <td onclick="playerMove(this)" id="71"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="72"></td>
        <td onclick="playerMove(this)" id="73"></td>
        <td onclick="playerMove(this)" id="74"></td>
        <td onclick="playerMove(this)" id="75"></td>
        <td onclick="playerMove(this)" id="76"></td>
        <td onclick="playerMove(this)" id="77"></td>
        <td onclick="playerMove(this)" id="78"></td>
        <td onclick="playerMove(this)" id="79"></td>
        <td onclick="playerMove(this)" id="80"></td>
    </tr>
</table>

<div id="remainingBombs"></div>

<button class="new-game-button" onclick="location.reload()">Start new game</button>

<script>
    var board = [
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false];
    var isFieldClicked = [[false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false]];
    var emptyFields = [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false];
    var numberOfBombsStickedToField = [
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0];
    var numberOfBombs = 9;
    var remainingBombs = board.length - numberOfBombs;
    var numberOfBombsToDisplay;

    function plantBombs() {
        for (var i = 0; i < numberOfBombs; i++) {
            while (true) {
                var randomNumber = Math.floor(Math.random() * board.length);
                if (!board[randomNumber]) {
                    board[randomNumber] = true;
                    console.log(randomNumber);
                    break;
                }
            }
        }
    }

    function playerMove(object) {
        numberOfBombsToDisplay = 0;
        console.log(object.id);
        if (board[object.id]) {
            displayAllBombs();
        }
        else if (parseInt(object.id) == 0) {
            leftTopCorner(object.id);
        }
        else if (object.id == 8) {
            rightTopCorner(object.id);
        }
        else if (object.id == 72) {
            leftBottomCorner(object.id);
        }
        else if (object.id == 80) {
            rightBottomCorner(object.id);
        }
        else if (object.id == 1 || object.id == 2 || object.id == 3 || object.id == 4 || object.id == 5 || object.id == 6 || object.id == 7) {
            topEdge(object.id);
        }
        else if (object.id == 9 || object.id == 18 || object.id == 27 || object.id == 36 || object.id == 45 || object.id == 54 || object.id == 63) {
            leftEdge(object.id);
        }
        else if (object.id == 6 || object.id == 7 || object.id == 8 || object.id == 11 || object.id == 12 || object.id == 13 || object.id == 16 || object.id == 17 || object.id == 18) {
            mid(object.id);
        }
        else if (object.id == 17 || object.id == 26 || object.id == 35 || object.id == 44 || object.id == 53 || object.id == 62 || object.id == 71) {
            rightEdge(object.id);
        }
        else if (object.id == 73 || object.id == 74 || object.id == 75 || object.id == 76 || object.id == 77 || object.id == 78 || object.id == 79) {
            bottomEdge(object.id);
        }
    }

    function leftTopCorner(index) {
        if (board[1]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[9]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[10]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        displayNumberOfBombsNear(numberOfBombsToDisplay, index);
        remainingBombs--;
        displayRemainingBombs();
    }

    function rightTopCorner(index) {
        if (board[7]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[16]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[17]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        displayNumberOfBombsNear(numberOfBombsToDisplay, index);
        remainingBombs--;
        displayRemainingBombs();
    }

    function leftBottomCorner(index) {
        if (board[63]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[64]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[73]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        displayNumberOfBombsNear(numberOfBombsToDisplay, index);
        remainingBombs--;
        displayRemainingBombs();
    }

    function rightBottomCorner(index) {
        if (board[70]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[71]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[79]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        displayNumberOfBombsNear(numberOfBombsToDisplay, index);
        remainingBombs--;
        displayRemainingBombs();
    }

    function topEdge(index) {
        if (board[parseInt(index) - 1]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 1]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 8]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 9]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 10]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        displayNumberOfBombsNear(numberOfBombsToDisplay, index);
        remainingBombs--;
        displayRemainingBombs();
    }

    function leftEdge(index) {
        if (board[parseInt(index) - 9]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 8]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 1]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 9]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 10]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        displayNumberOfBombsNear(numberOfBombsToDisplay, index);
        remainingBombs--;
        displayRemainingBombs();
    }

    function mid(index) {
        if (board[parseInt(index) - 10]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 9]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 8]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 1]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 1]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 8]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 9]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 10]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        displayNumberOfBombsNear(numberOfBombsToDisplay, index);
        remainingBombs--;
        displayRemainingBombs();
    }

    function rightEdge(index) {
        if (board[parseInt(index) - 10]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 9]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 1]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 8]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 9]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        displayNumberOfBombsNear(numberOfBombsToDisplay, index);
        remainingBombs--;
        displayRemainingBombs();
    }

    function bottomEdge(index) {
        if (board[parseInt(index) - 10]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 9]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 8]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 1]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 1]) {
            numberOfBombsStickedToField[index]++;
            numberOfBombsToDisplay++;
        }
        displayNumberOfBombsNear(numberOfBombsToDisplay, index);
        remainingBombs--;
        displayRemainingBombs();
    }

    function displayAllBombs() {
        for (var i = 0; i < board.length; i++) {
            if (board[i]) {
                document.getElementById(i.toString()).style.backgroundColor = "red";
            }
        }
    }


    function displayNumberOfBombsNear(numberOfBombs, index) {
        var divToChange = document.getElementById(index.toString());
        if (numberOfBombs > 0) {
            divToChange.innerHTML = numberOfBombs;
        }
        else {
            divToChange.style.backgroundColor = "darkGray";
        }
        switch (numberOfBombs) {
            case 5:
                divToChange.style.color = "black";
                break;
            case 4:
                divToChange.style.color = "purple";
                break;
            case 3:
                divToChange.style.color = "red";
                break;
            case 2:
                divToChange.style.color = "green";
                break;
            case 1:
                divToChange.style.color = "#0040ff";
                break;
        }
    }

    function displayRemainingBombs() {
        document.getElementById("remainingBombs").innerHTML = remainingBombs.toString();
    }
</script>
</body>
</html>