<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Minesweeper</title>
    <link rel="stylesheet" href="style.css">
</head>
<body onload="plantBombs()">
<table>
    <tr>
        <td onclick="playerMove(this)" id="00"></td>
        <td onclick="playerMove(this)" id="01"></td>
        <td onclick="playerMove(this)" id="02"></td>
        <td onclick="playerMove(this)" id="03"></td>
        <td onclick="playerMove(this)" id="04"></td>
        <td onclick="playerMove(this)" id="05"></td>
        <td onclick="playerMove(this)" id="06"></td>
        <td onclick="playerMove(this)" id="07"></td>
        <td onclick="playerMove(this)" id="08"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="10"></td>
        <td onclick="playerMove(this)" id="11"></td>
        <td onclick="playerMove(this)" id="12"></td>
        <td onclick="playerMove(this)" id="13"></td>
        <td onclick="playerMove(this)" id="14"></td>
        <td onclick="playerMove(this)" id="15"></td>
        <td onclick="playerMove(this)" id="16"></td>
        <td onclick="playerMove(this)" id="17"></td>
        <td onclick="playerMove(this)" id="18"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="20"></td>
        <td onclick="playerMove(this)" id="21"></td>
        <td onclick="playerMove(this)" id="22"></td>
        <td onclick="playerMove(this)" id="23"></td>
        <td onclick="playerMove(this)" id="24"></td>
        <td onclick="playerMove(this)" id="25"></td>
        <td onclick="playerMove(this)" id="26"></td>
        <td onclick="playerMove(this)" id="27"></td>
        <td onclick="playerMove(this)" id="28"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="30"></td>
        <td onclick="playerMove(this)" id="31"></td>
        <td onclick="playerMove(this)" id="32"></td>
        <td onclick="playerMove(this)" id="33"></td>
        <td onclick="playerMove(this)" id="34"></td>
        <td onclick="playerMove(this)" id="35"></td>
        <td onclick="playerMove(this)" id="36"></td>
        <td onclick="playerMove(this)" id="37"></td>
        <td onclick="playerMove(this)" id="38"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="40"></td>
        <td onclick="playerMove(this)" id="41"></td>
        <td onclick="playerMove(this)" id="42"></td>
        <td onclick="playerMove(this)" id="43"></td>
        <td onclick="playerMove(this)" id="44"></td>
        <td onclick="playerMove(this)" id="45"></td>
        <td onclick="playerMove(this)" id="46"></td>
        <td onclick="playerMove(this)" id="47"></td>
        <td onclick="playerMove(this)" id="48"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="50"></td>
        <td onclick="playerMove(this)" id="51"></td>
        <td onclick="playerMove(this)" id="52"></td>
        <td onclick="playerMove(this)" id="53"></td>
        <td onclick="playerMove(this)" id="54"></td>
        <td onclick="playerMove(this)" id="55"></td>
        <td onclick="playerMove(this)" id="56"></td>
        <td onclick="playerMove(this)" id="57"></td>
        <td onclick="playerMove(this)" id="58"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="60"></td>
        <td onclick="playerMove(this)" id="61"></td>
        <td onclick="playerMove(this)" id="62"></td>
        <td onclick="playerMove(this)" id="63"></td>
        <td onclick="playerMove(this)" id="64"></td>
        <td onclick="playerMove(this)" id="65"></td>
        <td onclick="playerMove(this)" id="66"></td>
        <td onclick="playerMove(this)" id="67"></td>
        <td onclick="playerMove(this)" id="68"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="70"></td>
        <td onclick="playerMove(this)" id="71"></td>
        <td onclick="playerMove(this)" id="72"></td>
        <td onclick="playerMove(this)" id="73"></td>
        <td onclick="playerMove(this)" id="74"></td>
        <td onclick="playerMove(this)" id="75"></td>
        <td onclick="playerMove(this)" id="76"></td>
        <td onclick="playerMove(this)" id="77"></td>
        <td onclick="playerMove(this)" id="78"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="80"></td>
        <td onclick="playerMove(this)" id="81"></td>
        <td onclick="playerMove(this)" id="82"></td>
        <td onclick="playerMove(this)" id="83"></td>
        <td onclick="playerMove(this)" id="84"></td>
        <td onclick="playerMove(this)" id="85"></td>
        <td onclick="playerMove(this)" id="86"></td>
        <td onclick="playerMove(this)" id="87"></td>
        <td onclick="playerMove(this)" id="88"></td>
    </tr>

</table>

<button class="new-game-button" onclick="location.reload()">Start new game</button>

<script>
    var board = [[false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false],
        [false, false, false, false, false, false, false, false, false]];
    var numberOfBombsAdjacentToField =
        [[0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0]];
    var numberOfBombs = 9;

    function plantBombs() {
        for (var i = 0; i < numberOfBombs; i++) {
            while (true) {
                var first = Math.floor(Math.random() * board.length);
                var second = Math.floor(Math.random() * board.length);
                if (!board[first][second]) {
                    board[first][second] = true;
                    console.log(first, second);
                    break;
                }
            }
        }
        fillBoard();
    }

    function fillBoard() {
        for (var i = 0; i < board.length; i++) {
            for (var j = 0; j < board.length; j++) {
                if (i == 0 && j == 0) {
                    leftTopCorner(0, 0);
                }
                else if (i == 0 && j == 8) {
                    rightTopCorner(0, 8);
                }
                else if (i == 8 && j == 0) {
                    leftBottomCorner(8, 0);
                }
                else if (i == 8 && j == 8) {
                    rightBottomCorner(8, 8);
                }
                else if (i == 0 && j > 0 && j < 8) {
                    topEdge(i, j);
                }
                else if (i > 0 && i < 8 && j == 0) {
                    leftEdge(i, j);
                }
                else if (i > 0 && i < 8 && j == 8) {
                    rightEdge(i, j);
                }
                else if (i == 8 && j > 0 && j < 8) {
                    bottomEdge(i, j);
                }
                else {
                    mid(i, j);
                }
            }
        }
    }

    function playerMove(object) {
        var x = parseInt(object.id.charAt(0));
        var y = parseInt(object.id.charAt(1));
        if (board[x][y]) {
            displayAllBombs();
        }
        else {
            displayNumberOfBombsNear(x, y);
        }
    }

    function leftTopCorner(x, y) {
        if (board[0][1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[1][0]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[1][1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
    }

    function rightTopCorner(x, y) {
        if (board[0][7]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[1][7]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[1][8]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
    }

    function leftBottomCorner(x, y) {
        if (board[7][0]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[7][1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[8][0]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
    }

    function rightBottomCorner(x, y) {
        if (board[7][7]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[7][8]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[8][7]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
    }

    function topEdge(x, y) {
        if (board[x][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
    }

    function leftEdge(x, y) {
        if (board[x - 1][y]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x - 1][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
    }

    function rightEdge(x, y) {
        if (board[x - 1][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x - 1][y]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
    }

    function bottomEdge(x, y) {
        if (board[x - 1][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x - 1][y]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x - 1][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
    }

    function mid(x, y) {
        if (board[x - 1][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x - 1][y]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x - 1][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y - 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
        if (board[x + 1][y + 1]) {
            numberOfBombsAdjacentToField[parseInt(x)][parseInt(y)]++;
        }
    }

    function displayAllBombs() {
        for (var i = 0; i < board.length; i++) {
            for (var j = 0; j < board.length; j++) {
                if (board[i][j]) {
                    document.getElementById((i.toString() + j.toString())).style.backgroundColor = "red";
                }
            }
        }
    }

    function displayNumberOfBombsNear(x, y) {
        console.log((x.toString() + y.toString()));
        var numberOfBombs = numberOfBombsAdjacentToField[x][y];
        var divToChange = document.getElementById((x.toString() + y.toString()));
        if (numberOfBombs > 0) {
            divToChange.innerHTML = numberOfBombs.toString();
        }
        else {
            divToChange.style.backgroundColor = "darkGray";
        }
        switch (numberOfBombs) {
            case 4:
                divToChange.style.color = "purple";
                break;
            case 3:
                divToChange.style.color = "red";
                break;
            case 2:
                divToChange.style.color = "green";
                break;
            case 1:
                divToChange.style.color = "#0040ff";
                break;
            default:
                divToChange.style.color = "black";
                break;
        }
    }
</script>
</body>
</html>