<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Minesweeper</title>
    <link rel="stylesheet" href="style.css">
</head>
<body onload="plantBombs()">
<table>
    <tr>
        <td onclick="playerMove(this)" id="0"></td>
        <td onclick="playerMove(this)" id="1"></td>
        <td onclick="playerMove(this)" id="2"></td>
        <td onclick="playerMove(this)" id="3"></td>
        <td onclick="playerMove(this)" id="4"></td>
        <td onclick="playerMove(this)" id="5"></td>
        <td onclick="playerMove(this)" id="6"></td>
        <td onclick="playerMove(this)" id="7"></td>
        <td onclick="playerMove(this)" id="8"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="9"></td>
        <td onclick="playerMove(this)" id="10"></td>
        <td onclick="playerMove(this)" id="11"></td>
        <td onclick="playerMove(this)" id="12"></td>
        <td onclick="playerMove(this)" id="13"></td>
        <td onclick="playerMove(this)" id="14"></td>
        <td onclick="playerMove(this)" id="15"></td>
        <td onclick="playerMove(this)" id="16"></td>
        <td onclick="playerMove(this)" id="17"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="18"></td>
        <td onclick="playerMove(this)" id="19"></td>
        <td onclick="playerMove(this)" id="20"></td>
        <td onclick="playerMove(this)" id="21"></td>
        <td onclick="playerMove(this)" id="22"></td>
        <td onclick="playerMove(this)" id="23"></td>
        <td onclick="playerMove(this)" id="24"></td>
        <td onclick="playerMove(this)" id="25"></td>
        <td onclick="playerMove(this)" id="26"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="27"></td>
        <td onclick="playerMove(this)" id="28"></td>
        <td onclick="playerMove(this)" id="29"></td>
        <td onclick="playerMove(this)" id="30"></td>
        <td onclick="playerMove(this)" id="31"></td>
        <td onclick="playerMove(this)" id="32"></td>
        <td onclick="playerMove(this)" id="33"></td>
        <td onclick="playerMove(this)" id="34"></td>
        <td onclick="playerMove(this)" id="35"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="36"></td>
        <td onclick="playerMove(this)" id="37"></td>
        <td onclick="playerMove(this)" id="38"></td>
        <td onclick="playerMove(this)" id="39"></td>
        <td onclick="playerMove(this)" id="40"></td>
        <td onclick="playerMove(this)" id="41"></td>
        <td onclick="playerMove(this)" id="42"></td>
        <td onclick="playerMove(this)" id="43"></td>
        <td onclick="playerMove(this)" id="44"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="45"></td>
        <td onclick="playerMove(this)" id="46"></td>
        <td onclick="playerMove(this)" id="47"></td>
        <td onclick="playerMove(this)" id="48"></td>
        <td onclick="playerMove(this)" id="49"></td>
        <td onclick="playerMove(this)" id="50"></td>
        <td onclick="playerMove(this)" id="51"></td>
        <td onclick="playerMove(this)" id="52"></td>
        <td onclick="playerMove(this)" id="53"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="54"></td>
        <td onclick="playerMove(this)" id="55"></td>
        <td onclick="playerMove(this)" id="56"></td>
        <td onclick="playerMove(this)" id="57"></td>
        <td onclick="playerMove(this)" id="58"></td>
        <td onclick="playerMove(this)" id="59"></td>
        <td onclick="playerMove(this)" id="60"></td>
        <td onclick="playerMove(this)" id="61"></td>
        <td onclick="playerMove(this)" id="62"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="63"></td>
        <td onclick="playerMove(this)" id="64"></td>
        <td onclick="playerMove(this)" id="65"></td>
        <td onclick="playerMove(this)" id="66"></td>
        <td onclick="playerMove(this)" id="67"></td>
        <td onclick="playerMove(this)" id="68"></td>
        <td onclick="playerMove(this)" id="69"></td>
        <td onclick="playerMove(this)" id="70"></td>
        <td onclick="playerMove(this)" id="71"></td>
    </tr>
    <tr>
        <td onclick="playerMove(this)" id="72"></td>
        <td onclick="playerMove(this)" id="73"></td>
        <td onclick="playerMove(this)" id="74"></td>
        <td onclick="playerMove(this)" id="75"></td>
        <td onclick="playerMove(this)" id="76"></td>
        <td onclick="playerMove(this)" id="77"></td>
        <td onclick="playerMove(this)" id="78"></td>
        <td onclick="playerMove(this)" id="79"></td>
        <td onclick="playerMove(this)" id="80"></td>
    </tr>
</table>

<div id="remainingBombs"></div>

<button class="new-game-button" onclick="location.reload()">Start new game</button>

<script>
    var board = [
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false,
        false, false, false, false, false, false, false, false, false];
    var numberOfBombsAdjacentToField = [
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0];
    var numberOfBombs = 9;
    var remainingBombs = board.length - numberOfBombs;
    var numberOfBombsToDisplay;

    function plantBombs() {
        for (var i = 0; i < numberOfBombs; i++) {
            while (true) {
                var randomNumber = Math.floor(Math.random() * board.length);
                if (!board[randomNumber]) {
                    board[randomNumber] = true;
                    console.log(randomNumber);
                    break;
                }
            }
        }
        fillBoard();
    }

    function fillBoard() {
        for (var i = 0; i < board.length; i++) {
            if (i == 0) {
                leftTopCorner(0);
            }
            if (i == 8) {
                rightTopCorner(8);
            }
            if (i == 72) {
                leftBottomCorner(72);
            }
            if (i == 80) {
                rightBottomCorner(80);
            }
            if (i == 1 || i == 2 || i == 3 || i == 4 || i == 5 || i == 6 || i == 7) {
                topEdge(i);
            }
            if (i == 9 || i == 18 || i == 27 || i == 36 || i == 45 || i == 54 || i == 63) {
                leftEdge(i);
            }
            if (i == 10 || i == 11 || i == 12 || i == 13 || i == 14 || i == 15 || i == 16 ||
                i == 19 || i == 20 || i == 21 || i == 22 || i == 23 || i == 24 || i == 25 ||
                i == 28 || i == 29 || i == 30 || i == 31 || i == 32 || i == 33 || i == 34 ||
                i == 37 || i == 38 || i == 39 || i == 40 || i == 41 || i == 42 || i == 43 ||
                i == 46 || i == 47 || i == 48 || i == 49 || i == 50 || i == 51 || i == 52 ||
                i == 55 || i == 56 || i == 57 || i == 58 || i == 59 || i == 60 || i == 61 ||
                i == 64 || i == 65 || i == 66 || i == 67 || i == 68 || i == 69 || i == 70) {
                mid(i);
            }
            if (i == 17 || i == 26 || i == 35 || i == 44 || i == 53 || i == 62 || i == 71) {
                rightEdge(i);
            }
            if (i == 73 || i == 74 || i == 75 || i == 76 || i == 77 || i == 78 || i == 79) {
                bottomEdge(i);
            }
        }
    }

    function playerMove(object) {
        numberOfBombsToDisplay = 0;
        console.log(typeof parseInt(object.id));
        console.log(object.id);
        if (board[object.id]) {
            displayAllBombs();
        }
        else {

            displayNumberOfBombsNear(numberOfBombsAdjacentToField[object.id], object.id);
        }
    }

    function leftTopCorner(index) {
        if (board[1]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[9]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[10]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        remainingBombs--;
        displayRemainingBombs();
    }

    function rightTopCorner(index) {
        if (board[7]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[16]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[17]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        remainingBombs--;
        displayRemainingBombs();
    }

    function leftBottomCorner(index) {
        if (board[63]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[64]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[73]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        remainingBombs--;
        displayRemainingBombs();
    }

    function rightBottomCorner(index) {
        if (board[70]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[71]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[79]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        remainingBombs--;
        displayRemainingBombs();
    }

    function topEdge(index) {
        if (board[parseInt(index) - 1]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 1]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 8]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 9]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 10]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        remainingBombs--;
        displayRemainingBombs();
    }

    function leftEdge(index) {
        if (board[parseInt(index) - 9]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 8]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 1]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 9]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 10]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        remainingBombs--;
        displayRemainingBombs();
    }

    function mid(index) {
        if (board[parseInt(index) - 10]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 9]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 8]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 1]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 1]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 8]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 9]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 10]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        remainingBombs--;
        displayRemainingBombs();
    }

    function rightEdge(index) {
        if (board[parseInt(index) - 10]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 9]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 1]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 8]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 9]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        remainingBombs--;
        displayRemainingBombs();
    }

    function bottomEdge(index) {
        if (board[parseInt(index) - 10]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 9]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 8]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) - 1]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        if (board[parseInt(index) + 1]) {
            numberOfBombsAdjacentToField[parseInt(index)]++;
            numberOfBombsToDisplay++;
        }
        remainingBombs--;
        displayRemainingBombs();
    }

    function displayAllBombs() {
        for (var i = 0; i < board.length; i++) {
            if (board[i]) {
                document.getElementById(i.toString()).style.backgroundColor = "red";
            }
        }
    }


    function displayNumberOfBombsNear(numberOfBombs, index) {
        var divToChange = document.getElementById(index.toString());
        if (numberOfBombs > 0) {
            divToChange.innerHTML = numberOfBombs;
        }
        else {
            divToChange.style.backgroundColor = "darkGray";
        }
        switch (numberOfBombs) {
            case 5:
                divToChange.style.color = "black";
                break;
            case 4:
                divToChange.style.color = "purple";
                break;
            case 3:
                divToChange.style.color = "red";
                break;
            case 2:
                divToChange.style.color = "green";
                break;
            case 1:
                divToChange.style.color = "#0040ff";
                break;
        }
    }

    function displayRemainingBombs() {
        document.getElementById("remainingBombs").innerHTML = remainingBombs.toString();
    }
</script>
</body>
</html>